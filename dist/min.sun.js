function(context,args){ // 
  var __main__;
(()=>{function D(_){if(_===void 0)return!1;for(let z=0;z<_.length;z++){let G=_[z].charCodeAt(0);if(!(G>=48&&G<=57||G>=65&&G<=90||G>=97&&G<=122||"_".includes(_[z])))return!1}return!0}function U(_){let z=[],G=_.split(`
`);for(let K of G){let X=K,Y="\/\/";if(K.includes(Y))K=K.substring(0,K.indexOf(Y));let B=K.split(";");for(let j of B){if(j=j.trim(),!j)continue;let Z=v(j);z.push({raw:X,tokens:Z})}}return z}function v(_){let G=["->","---",..."=!:;+-^~>[]*"];function K(j,Z,C){return j.substring(C,C+Z.length)==Z}let X=" \t\r",Y=[],B="";_:for(let j=0;j<_.length;j++){let Z=_[j];if(X.includes(Z)){while(X.includes(Z)){j++,Z=_[j];continue}Y.push(" ")}for(let Q of G)if(K(_,Q,j)){Y.push(Q),j+=Q.length-1;continue _}if(Z=='"'){let Q=Z;do j++,Z=_[j],Q+=Z;while(Z!='"');Y.push(Q);continue}let C=Z;j++,Z=_[j];while(D(Z))C+=Z,j++,Z=_[j];j--,Y.push(C)}if(Y.length>0&&Y[Y.length-1]!=";")Y.push(";");return Y}function P(_,z,G="",K=""){return L(`${G}Expected any of ["${_.join('", "')}"]. But recieved: "${z}". ${K}`)}var q=[],H=q[0],O=0;function S(_){let z=U(_),G=[],K=[];for(let X of z){q=X.tokens,H=q[0],O=0;let Y=t();if(Y.type=="error")K.push({line:X.raw,error:Y.error});else G.push(...Y.value)}return{errors:K,parsed:G}}function W(_){}function $(){if(O++,H=q[O],H===void 0)H=";";return W("Advanced: "+H),H}function i(_){return q[O+_]}function E(){return O>=q.length}function b(){return{curI:O,cur:H}}function n(_){O=_.curI,H=_.cur}function M(_){if(W("consume "+_),H!=_)return P([_],H);W("consumed");let z=H;return $(),F(void 0)}function J(){while(H==" ")$()}function F(_){return{type:"success",value:_}}function L(_){return W(_),{type:"error",error:_}}function t(){W("parseScriptLine"),J();let _=[];while(!E()){while(H==";")$();if(E())return F(_);let z=p();if(z.type=="error")return z;if(z.value)_.push(z.value)}return F(_)}function p(){W("parseCMD"),J();let _={};if(H==">"){_.type="return",$(),J();let K=M(";");if(K.type=="error")return K;return F(_)}if(H=="---"){_.type="stage",$(),J();let K=M(";");if(K.type=="error")return K;return F(_)}if(H=="alias"){_.type="alias";let K=u();if(K.type=="error")return K;return _.data=K.value,F(_)}let z={};_.type="rule",_.data=z;let G=r();if(G.type=="error")return G;if(z.filters=G.value,J(),H==";")return $(),F(_);if(J(),H=="->"){$();let K=c();if(K.type=="error")return K;z.actions=K.value,J();let X=M(";");if(X.type=="error")return X}if(z.actions&&z.actions.length==0)delete z.actions;if(z.filters&&z.filters.length==0)delete z.filters;return F(_)}function c(){W("parseActions");let _=[];while(!0){if(J(),H==";")return F(_);let z=s();if(z.type=="error")return z;_.push(z.value)}}function s(){W("parseAction"),J();let _=!1;if(H=="!")_=!0,$(),J();if(!D(H))return P(["alphanumeric string"],H,"Action error. ");let z=H;if($(),J(),D(H)||H==";"){let G=!0;if(_)G="undefined";return F({k:z,v:G})}else if(H=="="){$(),J();let G=T();if(G.type=="error")return G;let K=G.value;return $(),F({k:z,v:K})}else return P("=; ".split(""),H)}function u(){W("parseAlias");let _=M("alias");if(_.type=="error")return _;if(_=M(" "),_.type=="error")return _;if(J(),H.length!=1)return P(["single alphanumeric character"],H,"Alias error. ");let z=H;if($(),J(),_=M("="),_.type=="error")return _;if(J(),!D(H))return P(["alphanumeric string"],H,"Alias error. ");let G=H;if($(),J(),_=M(";"),_.type=="error")return _;return F({k:z,v:G})}function r(){W("parseFilters"),J();let _=[],z=b(),G=x(),K=a(),X=!1;if(K.type=="error")n(z),X=!0;else{if(G.type=="success"&&G.value===!0)K.value.negative=G.value;_.push(K.value)}J();while(!(H=="->"||H==";"||E())){let Y=x(),B=e();if(B.type=="error"&&K.type=="error"&&X)return L(K.error);if(B.type=="error")return B;if(Y.type=="success"&&Y.value===!0)B.value.negative=Y.value;_.push(B.value),J(),X=!1}return F(_)}function x(){if(J(),H=="!")return $(),F(!0);else return F(!1)}function a(){W("parseSUN");let _={filterType:"sun",negative:void 0,loaded:void 0,ready:void 0,alias:void 0,tier:void 0,rarity:void 0,value:void 0};if(H=="+")_.loaded=!0,$();else if(H=="-")_.loaded=!1,$();if(H=="^")_.ready=!0,$();else if(H=="~")_.ready=!1,$();if(!D(H)&&H!="*")return P(["alias char"],H,"SUN Rule error. ");switch(H.length){case 3:{if(_.alias=H[0],!isNaN(Number(H[1])))_.tier=Number(H[1]);if(!isNaN(Number(H[2])))_.rarity=Number(H[2]);$()}break;case 2:{if(_.alias=H[0],!isNaN(Number(H[1])))_.tier=Number(H[1]);if($(),H=="*")M("*");else if(H==" ");else if((H+"").length==1&&!isNaN(Number(H)))_.rarity=Number(H),$()}break;case 1:{if(_.alias=H[0],$(),H=="*")M("*");else if(H==" ");else if((H+"").length==1&&!isNaN(Number(H)))_.tier=Number(H),$();if(H=="*")M("*");else if(H==" ");else if((H+"").length==1&&!isNaN(Number(H)))_.rarity=Number(H),$()}break;default:return P(["alias char"],H,"SUN Rule error. ")}if(_.alias=="*")_.alias=void 0;if(H=="["){M("[");let z=k();if(z.type=="error")return z;if(z.value!="*")_.value=z.value;let G=M("]");if(G.type=="error")return G}if(H!=" "&&H!=";"&&H!="->")return P(["->",";"," "],H,"SUN Rule error. ");if(J(),_.loaded===void 0)delete _.loaded;if(_.negative===void 0)delete _.negative;if(_.rarity===void 0)delete _.rarity;if(_.ready===void 0)delete _.ready;if(_.tier===void 0)delete _.tier;if(_.value===void 0)delete _.value;return F(_)}function e(){W("parseLUN");let _={filterType:"lun",negative:void 0};if(!D(H))return P(["alphanumeric string"],H,"LUN Rule error. ");let z=H;$();let G=b();if(J(),H=="="){let K=M("=");if(K.type=="error")return K;J();let X=k();if(X.type=="error")return X;return _[z]=X.value,F(_)}else if([";","->","!"].includes(H)||D(H))return _[z]=!0,F(_);else return P(["=",";","->","!"],H,"LUB Rule error. ")}function k(){if(W("parseValue"),i(1)==":"){let _=_0();if(_.type=="error")return _;if(_.value.min==null&&_.value.max==null)return F(void 0);return _}else{let _=T();if(_.type=="error")return _;if(_.value==null)return F(void 0);return F(_.value)}}function T(){W("parseValueType");let _=H;if(!isNaN(Number(_)))return $(),F(Number(_));if(_[0]=='"'&&_[_.length-1]=='"')return _=_.replace(/\"/gm,""),$(),F(_);if(D(_)){if(_=="true")_=!0;if(_=="false")_=!1;return $(),F(_)}if(_=="*")return _=void 0,$(),F(_);return L("Failed to parse value "+_)}function _0(){let _=T();if(_.type=="error")return _;if(typeof _.value!="number"&&_.value!==void 0)_.value=Number(_.value);let z=M(":");if(z.type=="error")return z;let G=T();if(G.type=="error")return G;if(typeof G.value!="number"&&G.value!==void 0)G.value=Number(G.value);return F({type:"range",min:_.value,max:G.value})}function I(_){let z=S(_);if(z.errors.length>0)throw z.errors;let G={stages:[]},K=[];for(let X=0;X<z.parsed.length;X++){let Y=z.parsed[X];if(Y.type=="stage")G.stages.push(K),K=[];else K.push(Y);if(X==z.parsed.length-1)G.stages.push(K)}return G}var V={x:"l0ckbox",j:"l0ckjaw",q:"l0cket",a:"acct_nt",m:"magnara",W:"l0g_wr1t3r",o:"sn_w_usac",f:"shfflr",N:"CON_TELL",n:"CON_SPEC",D:"DATA_CHECK",g:"sn_w_glock","2":"ez_21","3":"ez_35","4":"ez_40",X:"c001",y:"c002",Y:"c003",C:"cron_bot",c:"char_count",s:"script_slot",S:"public_script","0":"channel_count",k:"k3y",b:"balance",w:"log_writer",t:"transactions",T:"transfer",u:"expose_upgrades",U:"transfer_upgrade",l:"expose_access_log",L:"expose_upgrade_log",z:"w4rn",Z:"w4rn_message",r:"w4rn_er"},h,R;function o(_,z){return N(_,I(z))}function N(_,z){h={};for(let K in V)h[K]=V[K];let G=[];for(let K of z.stages){R=[..._];for(let X of R)delete X._filtered;for(let X of K){if(X.type=="return"){if(R=R.filter((Y)=>!Y._filtered),R.length==0)break;continue}if(X.type=="alias"){h[X.data.k]=X.data.v;continue}if(X.type="rule"){if(!X.data)throw Error("Wtf?");let Y=[];for(let Z of R){if(!X.data.filters){Y.push(Z);continue}if(K0(Z,X.data.filters))Y.push(Z)}let B=(X.data.filters||[]).find((Z)=>Z._best!==void 0),j=(X.data.filters||[]).find((Z)=>Z._worst!==void 0);if(B&&typeof B._best=="number")Y=l(Y,B._best,!1,B.negative===!0);else if(j&&typeof j._worst=="number")Y=l(Y,j._worst,!0,j.negative===!0);for(let Z of Y){if(!G.includes(Z))G.push(Z);if(Z._filtered=!0,X.data.actions)X0(Z,X.data.actions)}}}}for(let K of _)delete K._filtered;return G}var y={};function w(_){if(_ in y)return y[_];let z=_.replace(/\_v\d$/gm,"").replace(/\_V\d$/gm,"");return y[_]=z,z}function f(_){if(!_.name)return 0;let z=w(_.name),G={k3y:_.k3y,CON_SPEC:_.p2_len,acct_nt:_.acct_nt_min,sn_w_glock:_.expire_secs,sn_w_usac:_.salt_digits,magnara:_.magnara_len,shfflr:_.digits,l0g_wr1t3r:_.loc_count,w4rn_message:_.cooldown,DATA_CHECK:_.acc_mod,l0cket:_.count,l0ckbox:_.count,l0ckjaw:_.count,balance:_.cooldown,expose_access_log:_.count,expose_upgrade_log:_.count,expose_upgrades:_.cooldown,log_writer:_.cooldown,transactions:_.count,transfer_upgrade:_.count,transfer:_.amount,channel_count:_.count,char_count:_.chars,public_script:_.slots,script_slot:_.slots,cron_bot:_.cooldown};if(z in G)return G[z];return 0}function A(_){if(!_.name)return 0;let z=w(_.name);if(z=="k3y"){if(!_.rarity)return 0;if(_.rarity==0)return 3;if(_.rarity==1)return 2;if(_.rarity>=2)return 1}let G={CON_SPEC:_.p2_len,acct_nt:_.acct_nt_min,sn_w_usac:_.salt_digits,magnara:_.magnara_len,shfflr:_.digits,l0g_wr1t3r:_.loc_count,DATA_CHECK:_.acc_mod,l0cket:_.count,l0ckbox:_.count,l0ckjaw:_.count,expose_access_log:_.count,expose_upgrade_log:_.count,transactions:_.count,transfer_upgrade:_.count,transfer:_.amount,channel_count:_.count,char_count:_.chars,public_script:_.slots,script_slot:_.slots,sn_w_glock:-_.expire_secs,w4rn_message:-_.cooldown,balance:-_.cooldown,expose_upgrades:-_.cooldown,log_writer:-_.cooldown,cron_bot:-_.cooldown};if(z in G)return G[z];return 1}function z0(_){if(!_.last_time||!_.cooldown)return-1;return _.cooldown*1000-(Date.now()-_.last_time)}function G0(_){return z0(_)<=0}function m(_,z){if(z===void 0)return!0;else if(typeof z=="number"||typeof z=="boolean")return _===z;else if(z=="undefined")return _===void 0;else if(typeof z=="string")return _===z;else if(z.type=="range")if(typeof _=="number"){let G=!0;if(_==null)return!1;if(z.min!=null&&_<z.min)G=!1;if(z.max!=null&&_>z.max)G=!1;return G}else return!1;return!1}function H0(_,z){if(!_.name)return!1;let G=w(_.name);if(h[z]==G)return!0;return!1}function K0(_,z){for(let G of z){let K=G.negative==!0;if(G.filterType=="sun"){if(G.alias&&!H0(_,G.alias)!==K)return!1;if(G.ready!=null&&G.ready!=G0(_)!==K)return!1;if(G.value!=null&&!m(f(_),G.value)!==K)return!1}for(let X in G){if(["_best","_worst","alias","ready","value","next_stage","filterType"].includes(X))continue;let Y=G[X];if(Y!=null&&!m(_[X],Y)!==K)return!1}}return!0}function g(_,z){if(!_.name)return 0;if(!z.name)return 0;let G=w(_.name),K=w(z.name),X=A(_),Y=A(z);if(G!=K)return 0;if(G=="k3y"&&_.k3y!=z.k3y)return 0;if(Y!=X)return Y-X;if(_.sn&&z.sn)return _.sn.localeCompare(z.sn);return 0}function l(_,z,G,K){if(_.sort(g),G)_.reverse();if(!K)return _.slice(0,z);if(K)return _.slice(z);return[]}function X0(_,z){for(let G of z)if(_[G.k]=G.v,G.v=="undefined")delete _[G.k]}function d(_){return _.sort((z,G)=>{if(z.name!==void 0&&G.name!==void 0&&z.name!=G.name)return z.name.localeCompare(G.name);let K=g(z,G);if(K!=0)return K;if(z.tier!==void 0&&G.tier!==void 0&&z.tier!=G.tier)return G.tier-z.tier;if(z.rarity!==void 0&&G.rarity!==void 0&&z.rarity!=G.rarity)return G.rarity-z.rarity;if(z.loaded!==void 0&&G.loaded!==void 0&&z.loaded!=G.loaded)return G.loaded?1:0;return 0})}function Y0(_){if(_&&_.import===!0)return{compile:I,filter:N,compileAndFilter:o,sortUpgrades:d,getUpgradeValue:f,getUpgradeQuality:A,Aliases:V};return(`    'J╔══════════════════════════════════════════════════════════════╗'    
    'J║'  cake.sun - Short Upgrade Notation                           'J║'   
    'J╠══════════════════════════════════════════════════════════════╣'    
    'J║'                                                              'J║'   
    'J║'  'I\\ | /                -= SUNSCRIPT =-'                        'J║'
    'J║'  'I- O -        A smart filter for your upgrades'               'J║'
    'J║'  'I/ | \\                 Keep it light'                         'J║'
    'J║'                                                              'J║'   
    'J║'  'IAll info is at https:`+"\/\/"+`github.com/CakeEaterGames/sunscript'  'J║'
    'J║                                                              ║'    
    'J╚══════════════════════════════════════════════════════════════╝'    `).replace(/'/gm,"`")}__main__=Y0;})();

  return __main__(args);
}